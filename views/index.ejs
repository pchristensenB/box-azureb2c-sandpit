<!DOCTYPE html>
<html lang="en-US">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Box Platform + Azure B2C</title>
	<!-- CSS -->
	<!-- JQuery -->
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<!-- Font Awesome -->
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
	<!-- Bootstrap core CSS -->
	<link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn01.boxcdn.net/platform/elements/13.0.0/en-US/explorer.css" />
	<link href="https://pcboxdemo.github.io/css/auth.css" type="text/css" rel="stylesheet" />
	<!-- Bootstrap core JavaScript -->
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
	<!-- BOX JS-->

	

	<script src="https://cdn01.boxcdn.net/platform/elements/13.0.0/en-US/explorer.js"></script>
	<script src="azureb2c.js"></script>
</head>

<body>
	<div class="navbar-wrapper">
		<div class="container">
			<nav class="navbar navbar-expand-lg navbar-light bg-primary">
				<div class="container">

					<div id="navbar" class="navbar-collapse collapse">
						<ul class="navbar-nav mr-auto">
							<li class="nav-item active">
								<a class="nav-link waves-effect waves-light" href="#">Home</a>
							</li>
							<% if (!user) { %>
								<li class="nav-item" id="loginLink">

									<a class="nav-link waves-effect waves-light" id="signInButton" href="/login/?p=B2C_1_signin" title="Sign in">Log in</a>
								</li>
								<li class="nav-item" id="loginLink">
									<a class="nav-link waves-effect waves-light" id="signInButton" href="/login/?p=B2C_1_signup" title="Regiter">Register</a>
								</li>
								<% } else { %>
									<li class="nav-item" id="loginLink">
										<a class="nav-link waves-effect waves-light" id="signInButton" href="/logout" title="Logout">Logout</a>
									</li>
									<% } %>

						</ul>
					</div>
				</div>
			</nav>
			<button type="button" class="collapsible" id="userinfo" style="display:none">Open User Info</button>
			<div id="user" class="content"></div>
		</div>
	</div>

	<div style="margin:auto;width:50%;">
		<div id="boxUI">
			<div id="app-container" style="width:95%;"></div>
		</div>
		<section class="load" style="margin:auto;width:50%;"></section>
		<section class="view">
			<div class="row">
				<div class="col-md-6">
					<div class="d-flex flex-column  h-100">
						<h3 class="heading display-5">Azure B2C and Box Platform Demo</h3>
						<p class="subheading" id="mainMsg1">Shows Azure B2C integration with Box platform and app users. In this demo we use lazy app user creation, so after the
							user has been authorized by AzureB2C we check if the user exists, and create if not. The mapping is done from Azure
							User ID to Box 'external_app_user_id'. 
						</p>
						<h4 class="subheading" id="mainMsg"></h4>
						<div>
							<% if (!user) { %>
								<p id="statusNotAuth" title="Status">
									Login or register to continue
								</p>
								<% } else { %>
									<p id="statusAuth" title="Status">
										You are logged in as
										<%= user.displayName %>
									</p>


									<% } %>
						</div>
					</div>

				</div>

				<div class="col-md-6">
					<a href="#" id="popreg">
						[ Register Diagram |
					</a>
					<a href="#" id="poplog">
						Login Diagram |
					</a>
					<a href="https://github.com/pchristensenB/box-azureb2c-sandpit" target="_blank" id="git">
						GitHub ]
					</a>
					<div class="view">
						<img src="https://pchristensenb.github.io/Template/sidebar-image.jpeg" class="img-fluid" alt="smaple image">
						<div class="mask flex-center gradient">
							<span style="font-size:10px;">
								Demo Created by <a href="mailto:pchristensen@box.com">Peter Christensen</a>, Senior Staff Platform Solutions Engineer, Box<br/>
								<a href='#' id="lic">Software License</a>
							</span>
						</div>
					</div>
				</div>
			</div>
		</section>
	</div>
	<div class="modal fade" id="imagemodal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">
						<span aria-hidden="true">&times;</span>
						<span class="sr-only">Close</span>
					</button>
				</div>
				<div class="modal-body" style="background:white;">
					<img src="" style="margin-left:-400px;margin-top:-100px;" id="imagepreview">
					<div id="license"></div>

				</div>

			</div>
		</div>
	</div>

</body>

</html>